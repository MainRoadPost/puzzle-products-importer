# Fetch domains
query GetDomains {
  domains {
    id
    name
  }
}

# Login mutation
mutation Login($domainName: String, $username: String!, $password: String!) {
  login(domainName: $domainName, username: $username, password: $password) {
    id
    nbf
    exp
  }
}

# Fetch projects
query GetProjects {
  projects(
    orders: [{ field: TITLE, ascending: true }]
  ) {
    id
    title
    doneAt
  }
}


# Fetch product descendants (used in check_if_exists)
query GetProductDescendants($projectId: UUID!, $ancestorIds: [UUID!]!, $maxDepth: Int) {
  productDescendants(
    projectId: $projectId,
    ancestorIds: $ancestorIds,
    includeAncestors: true,
    filter: { tagsInclude: [], tagsExclude: [] },
    maxDepth: $maxDepth
  ) {
    kind
    id
    code
    parentId
  }
}

# Create product group
mutation CreateProductGroup($product: ProductAdd!) {
  productCreate(product: $product) {
    id
  }
}

# Create product
mutation CreateProduct($product: ProductAdd!) {
  productCreate(product: $product) {
    id
  }
}

mutation UpdateProducts(
  $projectId: UUID!
  $productIds: [UUID!]!
  $change: ProductChange!
) {
  productsUpdate(
    projectId: $projectId
    productIds: $productIds
    change: $change
  ) {
    id
    code
    status
    dueDate
    estimation
    deliverable
    description
    tags
    thumbnail         
  }
}


# Fetch whoami (optional, for debugging)
query WhoAmI {
  whoami {
    id
    nbf
    exp
  }
}
